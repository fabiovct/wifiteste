<!DOCTYPE html>
<html>
    <head>
        <title>Cadastro de Produtos</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="_css/bootstrap.css" rel="stylesheet" type="text/css"/>
        <link href="_css/style.css" rel="stylesheet" type="text/css"/>         
        
    <script type='text/javascript' src='_js/jquery-3.3.1.js'></script>
    <script>

// $(document).ready(function () {
//         yourFunction();
//     });
    
    
    
    </script>
       
    </head>

    <body class="content">
        
        <div class="container content-container mt-4 col-8">    
            <form method="POST" class="mt-5" id="formlogin">
                <h5 class="ml-3">Endereço:</h5>
                <div class="form-row ml-3 mr-3">
                    <div class="form-group col-lg-2">
                      <label for="cep">Cep</label>
                      <input type="text" class="form-control" id="cep">
                      <button id="pegar-endereco" type="button" class=" mt-2 btn btn-sm btn-primary">Procurar</button>
                    </div>
                </div>
                <div class="form-row ml-3 mr-3">

                    <div class="form-group col-lg-1">
                      <label for="uf">UF</label>
                      <input readonly type="text" class="form-control" id="uf">
                    </div>
                    <div class="form-group col-lg-3">
                        <label for="cidade">Cidade</label>
                        <input readonly type="text" class="form-control" id="cidade">
                    </div>
                    <div class="form-group col-lg-4">
                        <label for="bairro">Bairro</label>
                        <input readonly type="text" class="form-control" id="bairro">
                    </div>
                    <div class="form-group col-lg-12">
                        <label for="rua">Rua</label>
                        <input readonly type="text" class="form-control" id="rua">
                    </div>
                </div>

                <hr class="linha-form"></hr>
                <h5 class="ml-3">Buscar Produtos:</h5>

                <div class="form-row ml-3 mr-3">
                    <div class="form-group col-lg-3">
                        <label for="tipo_busca">Tipo de Busca</label>
                        <select id="tipo_busca" class="form-control">
                          <option value="referencia">Referência</option>
                          <option value="nome">Nome</option>
                        </select>
                      </div>
                      <div class="form-group col-lg-3">
                        <label for="busca_produto">Referência ou Nome</label>
                        <input type="text" class="form-control" id="busca_produto">
                    </div>

                </div>
                <div class="form-row ml-3 mr-3">
                    <div class="form-group col-lg-3">
                    <button id="buscar-produtos" type="button" class=" mt-2 btn btn-sm btn-primary">Buscar</button>
                    </div>
                </div>

                <hr class="linha-form"></hr>




                <button type="submit" class="btn btn-primary mb-5">Cadastrar</button>
            </form>
        </div>
    </body>



     <footer>
        <div id="footer"></div>
     </footer>

     <script>
         let endereco_completo;
         $('#pegar-endereco').click(function(){
            var cep=$('#cep').val()
            $.ajax({			//Função AJAX
                url:"http://localhost:8000/api/endereco/buscar-dados",			//Arquivo php
                type:"POST",				//Método de envio
                data:{"cep":cep},
                   success: function (result){			//Sucesso no AJAX
                        console.log(result);
                        endereco_completo = result;
                        console.log(endereco_completo['uf']);

                        document.getElementById('uf').value = endereco_completo['uf'];
                        document.getElementById('cidade').value = endereco_completo['localidade'];
                        document.getElementById('bairro').value = endereco_completo['bairro'];
                        document.getElementById('rua').value = endereco_completo['logradouro'];
                    
                    }
            })
            return false;	//Evita que a página seja atualizada
         })

         $('#buscar-produtos').click(function(){
            var tipo_busca=$('#tipo_busca').val()
            var busca_produto=$('#busca_produto').val()
            $.ajax({			//Função AJAX
                url:"http://localhost:8000/api/produtos/search-produtos",			//Arquivo php
                type:"POST",				//Método de envio
                data:{"tipo_busca":tipo_busca,"busca_produto":busca_produto},
                   success: function (result){			//Sucesso no AJAX
                        console.log(result);
                    }
            })
            return false;	//Evita que a página seja atualizada
         })
         
        // $("#header").load('header.html');
        // $("#footer").load('footer.html');
        //login

        // $(document).ready(function(){
        //$('#errolog').hide(); //Esconde o elemento com id errolog
        $('#formlogin').submit(function(){ 	//Ao submeter formulário
            // var login=$('#email').val();	//Pega valor do campo email
            // var password=$('#password').val();	//Pega valor do campo senha
            $.ajax({			//Função AJAX
                url:"http://localhost:8000/api/fatura/historico-faturas",			//Arquivo php
                type:"GET",				//Método de envio
                // data: "email="+login+"&password="+password,	//Dados
                   success: function (result){			//Sucesso no AJAX
                    console.log(result);
                            // if(result==1){					
                            //     location.href='sistema_interno.html'	//Redireciona
                            // }else{
                            //     //$('#errolog').show();		//Informa o erro
                            //     location.href='index.html'
                            // }
                        }
            })
            return false;	//Evita que a página seja atualizada
        })

        function yourFunction(){
            $.ajax({			//Função AJAX
                url:"http://localhost:8000/api/fatura/historico-faturas",			//Arquivo php
                type:"GET",				//Método de envio
                // data: "email="+login+"&password="+password,	//Dados
                   success: function (result){			//Sucesso no AJAX
                    console.log(result);
                            // if(result==1){					
                            //     location.href='sistema_interno.html'	//Redireciona
                            // }else{
                            //     //$('#errolog').show();		//Informa o erro
                            //     location.href='index.html'
                            // }
                        }
            })
    }
    // })
        
        </script>
     
    
</html>